<div *ngIf="!isLoaded" class="progress-spinner-container">
  <mat-progress-spinner
    class="example-margin"
    color="#9b59b6"
    mode="indeterminate">
  </mat-progress-spinner>
</div>
<div *ngIf="isLoaded" class="statistics-container">
  <div class="today-statistics">
    <h1>Статистика за сегодня</h1>
    <h2 *ngIf="!userId" class="today-statistics-warn">Доступно только авторизованным пользователям</h2>
    <div class="today-statistics-general" [ngClass]="!userId ? 'statistics-blurred' : ''">
      <div class="new-words">
        <h3><span>{{ todayStatistics.allNewWords}}</span> новых слов</h3>
      </div>
      <div class="words-learned">
        <h3><span>{{ todayStatistics.allWordsLearned }}</span> слов изучено</h3>
      </div>
      <div class="right-percent">
        <h3><span>{{ todayStatistics.allGamesRightPercent }}%</span> правильных ответов</h3>
      </div>
    </div>
    <div class="game-card-container" [ngClass]="!userId ? 'statistics-blurred' : ''">
      <div class="game-card">
        <h2>Спринт</h2>
        <div class="game-card-statistic">
          <mat-icon class="books-icon">library_books</mat-icon>
          <span>Новых слов:
            <span>
              {{ todayStatisticsSprint.newWords }}
            </span>
          </span>
        </div>
        <div class="game-card-statistic">
          <mat-icon class="answers-icon">done_all</mat-icon>
          <span>Правильных ответов: {{ todayStatisticsSprint.rightPercent }}%</span>
        </div>
        <div class="game-card-statistic">
          <mat-icon class="grade-icon">grade</mat-icon>
          <span>Лучшая серия правильных ответов: {{ todayStatisticsSprint.bestStreak }}</span>
        </div>
      </div>
      <div class="game-card">
        <h2>Аудиовызов</h2>
        <div class="game-card-statistic">
          <mat-icon class="books-icon">library_books</mat-icon>
          <span>Новых слов: {{ todayStatisticsAudioCall.newWords }}</span>
        </div>
        <div class="game-card-statistic">
          <mat-icon class="answers-icon">done_all</mat-icon>
          <span>Правильных ответов: {{ todayStatisticsAudioCall.rightPercent }}%</span>
        </div>
        <div class="game-card-statistic">
          <mat-icon class="grade-icon">grade</mat-icon>
          <span>Лучшая серия правильных ответов: {{ todayStatisticsAudioCall.bestStreak }}</span>
        </div>
      </div>
    </div>
  </div>
  <div class="all-time-statistics">
    <h2 class="all-time-statistics-title">Статистика за всё время</h2>
    <h2 *ngIf="!userId" class="all-time-statistics-warn">Доступно только авторизованным пользователям</h2>
    <div class="charts" [ngClass]="!userId ? 'statistics-blurred' : ''">
      <canvas baseChart
        [labels]="barChartLabels"
        [datasets]="barChartData"
        [options]="barChartOptions"
        [plugins]="barChartPlugins"
        [legend]="barChartLegend"
        [type]="'bar'"
      >
      </canvas>
      <canvas baseChart
        [labels]="lineChartLabels"
        [datasets]="lineChartData"
        [options]="lineChartOptions"
        [legend]="lineChartLegend"
        [type]="'line'"
      >
      </canvas>
    </div>
  </div>
</div>
